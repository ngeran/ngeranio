<!doctype html><html lang=en-us dir=ltr class=scroll-smooth><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tagging | ngeran[io]</title><link rel=stylesheet href=/css/styles.min.e7af9e1de1a0d7dbdf1cb48de72b22dbe133dcd329351f4b3f30ad925e0c25a1.css integrity="sha256-56+eHeGg19vfHLSN5ysi2+Ez3NMpNR9LPzCtkl4MJaE=" crossorigin=anonymous><link rel=stylesheet href=/css/theme.min.de0c106fed4857761030043fbc7cb43f68eb2b7892848baa9ce44927a8b65cee.css integrity="sha256-3gwQb+1IV3YQMAQ/vHy0P2jrK3iShIuqnORJJ6i2XO4=" crossorigin=anonymous><script src=/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Allerta+Stencil&display=swap" rel=stylesheet></head><body class=bg-dust-800><nav class="fixed top-0 left-0 right-0 z-50 bg-dust-800 border-b border-gray-700 mb-4"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center h-16"><div class="flex items-center"><a href=/ class="flex items-center gap-3"><div class="flex items-center"><span class="text-lg font-bold text-gray-100">ngeran</span>
<span class=text-nord-frost-pale>[</span>
<span class=text-nord-aurora-yellow>io</span>
<span class=text-nord-frost-pale>]</span></div></a><div class="navbar-separator ml-6"></div></div><div class="hidden lg:flex lg:items-center"><a href=/ class="nav-link flex items-center gap-2 px-4 py-3 text-gray-100 hover:bg-dust-900 hover:text-moon rounded transition-all duration-200" style=text-decoration:none;font-size:1rem><span class=capitalize>home</span></a><div class="relative group"><a href=/routing/ class="nav-link flex items-center gap-2 px-4 py-3 text-gray-100 hover:bg-dust-900 hover:text-moon rounded transition-all duration-200" style=text-decoration:none;font-size:1rem><span class="text-moon font-bold text-lg leading-none">+</span>
<span class=capitalize>blog</span></a><div class="megamenu-dropdown absolute left-1/2 -translate-x-1/2 top-full mt-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 ease-out transform translate-y-2 group-hover:translate-y-0 z-50" style=width:400px><div class="bg-dust-800 shadow-2xl overflow-hidden pb-6"><div class="px-6 py-4 border-b border-gray-700/50 bg-gradient-to-r from-[#5e81ac]/10 to-[#81a1c1]/10"><h3 class="text-lg font-semibold text-moon">blog</h3><p class="text-sm text-dust-400 mt-1">Routing protocols study materials</p></div><div class=p-2><a href=/routing/bgp/ class="group/item flex items-center gap-4 px-4 py-3 hover:bg-dust-900 transition-all duration-200 border-b border-gray-700/50 menu-item-border"><div class="w-10 h-10 flex items-center justify-center"><svg class="w-5 h-5 text-nord-frost-pale group-hover/item:text-moon group-hover/item:scale-110 transition-all duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg></div><div class=flex-1><h4 class="font-medium text-gray-100 group-hover/item:text-moon transition-colors duration-200">b.g.p</h4></div><svg class="w-5 h-5 text-gray-600 group-hover/item:text-moon group-hover/item:scale-110 transition-all duration-200" viewBox="0 0 24 24" fill="none"><path d="M7 9c.55228.0 1-.44772 1-1S7.55228 7 7 7 6 7.44772 6 8s.44772 1 1 1z" fill="currentColor"/><path d="M9 11C9.55228 11 10 10.5523 10 10c0-.55228-.44772-1-1-1s-1 .44772-1 1C8 10.5523 8.44772 11 9 11z" fill="currentColor"/><path d="M11 13C11.5523 13 12 12.5523 12 12S11.5523 11 11 11 10 11.4477 10 12 10.4477 13 11 13z" fill="currentColor"/><path d="M9 15C9.55228 15 10 14.5523 10 14s-.44772-1-1-1S8 13.4477 8 14s.44772 1 1 1z" fill="currentColor"/><path d="M7 17C7.55228 17 8 16.5523 8 16 8 15.4477 7.55228 15 7 15S6 15.4477 6 16C6 16.5523 6.44772 17 7 17z" fill="currentColor"/><path d="M14 9C14.5523 9 15 8.55228 15 8S14.5523 7 14 7s-1 .44772-1 1S13.4477 9 14 9z" fill="currentColor"/><path d="M16 11C16.5523 11 17 10.5523 17 10 17 9.44772 16.5523 9 16 9 15.4477 9 15 9.44772 15 10 15 10.5523 15.4477 11 16 11z" fill="currentColor"/><path d="M18 13C18.5523 13 19 12.5523 19 12S18.5523 11 18 11 17 11.4477 17 12 17.4477 13 18 13z" fill="currentColor"/><path d="M16 15C16.5523 15 17 14.5523 17 14S16.5523 13 16 13C15.4477 13 15 13.4477 15 14S15.4477 15 16 15z" fill="currentColor"/><path d="M14 17C14.5523 17 15 16.5523 15 16 15 15.4477 14.5523 15 14 15S13 15.4477 13 16C13 16.5523 13.4477 17 14 17z" fill="currentColor"/></svg>
</a><a href=/routing/mpls/ class="group/item flex items-center gap-4 px-4 py-3 hover:bg-dust-900 transition-all duration-200 border-b border-gray-700/50 menu-item-border"><div class="w-10 h-10 flex items-center justify-center"><svg class="w-5 h-5 text-nord-frost-pale group-hover/item:text-moon group-hover/item:scale-110 transition-all duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg></div><div class=flex-1><h4 class="font-medium text-gray-100 group-hover/item:text-moon transition-colors duration-200">m.p.l.s</h4></div><svg class="w-5 h-5 text-gray-600 group-hover/item:text-moon group-hover/item:scale-110 transition-all duration-200" viewBox="0 0 24 24" fill="none"><path d="M7 9c.55228.0 1-.44772 1-1S7.55228 7 7 7 6 7.44772 6 8s.44772 1 1 1z" fill="currentColor"/><path d="M9 11C9.55228 11 10 10.5523 10 10c0-.55228-.44772-1-1-1s-1 .44772-1 1C8 10.5523 8.44772 11 9 11z" fill="currentColor"/><path d="M11 13C11.5523 13 12 12.5523 12 12S11.5523 11 11 11 10 11.4477 10 12 10.4477 13 11 13z" fill="currentColor"/><path d="M9 15C9.55228 15 10 14.5523 10 14s-.44772-1-1-1S8 13.4477 8 14s.44772 1 1 1z" fill="currentColor"/><path d="M7 17C7.55228 17 8 16.5523 8 16 8 15.4477 7.55228 15 7 15S6 15.4477 6 16C6 16.5523 6.44772 17 7 17z" fill="currentColor"/><path d="M14 9C14.5523 9 15 8.55228 15 8S14.5523 7 14 7s-1 .44772-1 1S13.4477 9 14 9z" fill="currentColor"/><path d="M16 11C16.5523 11 17 10.5523 17 10 17 9.44772 16.5523 9 16 9 15.4477 9 15 9.44772 15 10 15 10.5523 15.4477 11 16 11z" fill="currentColor"/><path d="M18 13C18.5523 13 19 12.5523 19 12S18.5523 11 18 11 17 11.4477 17 12 17.4477 13 18 13z" fill="currentColor"/><path d="M16 15C16.5523 15 17 14.5523 17 14S16.5523 13 16 13C15.4477 13 15 13.4477 15 14S15.4477 15 16 15z" fill="currentColor"/><path d="M14 17C14.5523 17 15 16.5523 15 16 15 15.4477 14.5523 15 14 15S13 15.4477 13 16C13 16.5523 13.4477 17 14 17z" fill="currentColor"/></svg>
</a><a href=/routing/ospf/ class="group/item flex items-center gap-4 px-4 py-3 hover:bg-dust-900 transition-all duration-200 border-b border-gray-700/50 menu-item-border"><div class="w-10 h-10 flex items-center justify-center"><svg class="w-5 h-5 text-nord-frost-pale group-hover/item:text-moon group-hover/item:scale-110 transition-all duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg></div><div class=flex-1><h4 class="font-medium text-gray-100 group-hover/item:text-moon transition-colors duration-200">o.s.p.f</h4></div><svg class="w-5 h-5 text-gray-600 group-hover/item:text-moon group-hover/item:scale-110 transition-all duration-200" viewBox="0 0 24 24" fill="none"><path d="M7 9c.55228.0 1-.44772 1-1S7.55228 7 7 7 6 7.44772 6 8s.44772 1 1 1z" fill="currentColor"/><path d="M9 11C9.55228 11 10 10.5523 10 10c0-.55228-.44772-1-1-1s-1 .44772-1 1C8 10.5523 8.44772 11 9 11z" fill="currentColor"/><path d="M11 13C11.5523 13 12 12.5523 12 12S11.5523 11 11 11 10 11.4477 10 12 10.4477 13 11 13z" fill="currentColor"/><path d="M9 15C9.55228 15 10 14.5523 10 14s-.44772-1-1-1S8 13.4477 8 14s.44772 1 1 1z" fill="currentColor"/><path d="M7 17C7.55228 17 8 16.5523 8 16 8 15.4477 7.55228 15 7 15S6 15.4477 6 16C6 16.5523 6.44772 17 7 17z" fill="currentColor"/><path d="M14 9C14.5523 9 15 8.55228 15 8S14.5523 7 14 7s-1 .44772-1 1S13.4477 9 14 9z" fill="currentColor"/><path d="M16 11C16.5523 11 17 10.5523 17 10 17 9.44772 16.5523 9 16 9 15.4477 9 15 9.44772 15 10 15 10.5523 15.4477 11 16 11z" fill="currentColor"/><path d="M18 13C18.5523 13 19 12.5523 19 12S18.5523 11 18 11 17 11.4477 17 12 17.4477 13 18 13z" fill="currentColor"/><path d="M16 15C16.5523 15 17 14.5523 17 14S16.5523 13 16 13C15.4477 13 15 13.4477 15 14S15.4477 15 16 15z" fill="currentColor"/><path d="M14 17C14.5523 17 15 16.5523 15 16 15 15.4477 14.5523 15 14 15S13 15.4477 13 16C13 16.5523 13.4477 17 14 17z" fill="currentColor"/></svg></a></div><div class="mt-6 pt-4 px-6 border-t border-gray-700/50 flex items-center justify-between"><span class="text-sm text-dust-400"><span class="text-moon font-semibold">3</span> protocols available
</span><a href=/routing/ class="text-sm text-nord-frost-pale hover:text-moon transition-colors duration-200 font-medium inline-flex items-center gap-1">Browse all
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0-4 4m4-4H3"/></svg></a></div></div></div></div></div><a href=/projects/ class="nav-link flex items-center gap-2 px-4 py-3 text-gray-100 hover:bg-dust-900 hover:text-moon rounded transition-all duration-200" style=text-decoration:none;font-size:1rem><span class=capitalize>projects</span></a></div><div class=lg:hidden><button id=mobile-menu-button class="text-gray-100 focus:outline-none">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div><div id=mobile-menu class="hidden lg:hidden pb-4"><div class="pt-2 space-y-1"><a href=/ class="block px-3 py-2 text-gray-100 hover:bg-dust-900 rounded-lg font-medium">home</a><div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">blog</div><a href=/routing/bgp/ class="block px-4 py-2 text-gray-100 hover:bg-dust-900 rounded-lg">b.g.p
</a><a href=/routing/mpls/ class="block px-4 py-2 text-gray-100 hover:bg-dust-900 rounded-lg">m.p.l.s
</a><a href=/routing/ospf/ class="block px-4 py-2 text-gray-100 hover:bg-dust-900 rounded-lg">o.s.p.f
</a><a href=/projects/ class="block px-3 py-2 text-gray-100 hover:bg-dust-900 rounded-lg font-medium">projects</a></div></div></div></nav><div class="relative flex flex-col grow pt-16"><main class=grow><article><div class="max-w-4xl pr-6 sm:px-8 lg:px-12" style=padding-left:4.5rem!important><div id=hero class=h-[50px]></div><header class="mt-5 max-w-prose" style=padding-left:4.5rem!important><h1 class="mt-0 text-4xl font-extrabold text-[#5e81ac]">Tagging</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2025-04-14T16:52:11-04:00>April 14, 2025</time>
<span class="px-2 text-primary-500">.</span>
<span>1116 words</span>
<span class="px-2 text-primary-500">.</span>
<span>6 minutes</span></div><div class="flex flex-row flex-wrap items-center"></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="ngeran a.k.a nikos" src=/author/avatar.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">ngeran a.k.a nikos</div><div class="text-2xl sm:text-lg"></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><div class="mt-0 overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><div class="min-w-[220px] py-2 border-dotted list-none ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600 text-sm"><nav id=TableOfContents><ul><li><a href=#junos-vlan-tagging-options-explained>Junos VLAN Tagging Options Explained</a><ul><li><a href=#1-vlan-tagging>1. <code>vlan-tagging</code></a></li><li><a href=#2-flexible-vlan-tagging>2. <code>flexible-vlan-tagging</code></a></li><li><a href=#3-encapsulation-flexible-ethernet-services>3. <code>encapsulation flexible-ethernet-services</code></a></li><li><a href=#summary-table>Summary Table</a></li></ul></li></ul></nav></div></div></div></div><div class="min-w-0 min-h-0 max-w-fit" style=padding-left:4.5rem!important><div class="article-content max-w-prose mb-20 prose-h3:text-[#5e81ac]"><h2 id=junos-vlan-tagging-options-explained>Junos VLAN Tagging Options Explained</h2><p>Here&rsquo;s a comparison of <code>vlan-tagging</code>, <code>flexible-vlan-tagging</code>, and <code>encapsulation flexible-ethernet-services</code>.</p><h3 id=1-vlan-tagging>1. <code>vlan-tagging</code></h3><ul><li><strong>Configuration Level:</strong> Physical Interface (<code>set interfaces &lt;interface-name> vlan-tagging</code>)</li><li><strong>Purpose:</strong> Enables basic IEEE 802.1Q VLAN tagging support on the physical interface.</li><li><strong>Capabilities:</strong><ul><li>Allows logical units (<code>unit</code>) under this interface to be configured with a <em>single</em> VLAN ID (<code>set interfaces &lt;interface-name> unit &lt;number> vlan-id &lt;id></code>).</li><li>Supports sending and receiving standard single-tagged Ethernet frames.</li><li>Can support one untagged VLAN using the <code>native-vlan-id</code> option on the physical interface.</li></ul></li><li><strong>Limitations:</strong><ul><li>Does <em>not</em> natively support receiving or sending double-tagged (QinQ/Stacked VLAN) frames on logical units.</li><li>Does <em>not</em> easily support mixing tagged and untagged traffic across <em>different</em> logical units on the same physical interface (only one native/untagged VLAN is easily supported for the whole port).</li><li>Limited flexibility in VLAN mapping per logical unit.</li></ul></li><li><strong>Typical Use Case:</strong><ul><li>Standard &ldquo;trunk&rdquo; ports connecting to switches or other routers where multiple VLANs, each identified by a single tag, need to be carried.</li><li>Simple Layer 2 or Layer 3 sub-interfaces.</li></ul></li><li><strong>Example:</strong><pre tabindex=0><code class=language-junos data-lang=junos># Configure the physical interface for basic single-tagging
set interfaces ge-0/0/1 vlan-tagging
set interfaces ge-0/0/1 native-vlan-id 10  # Optional: VLAN 10 is untagged

# Configure logical units with single VLAN IDs
set interfaces ge-0/0/1 unit 100 vlan-id 100
set interfaces ge-0/0/1 unit 100 family inet address 192.168.100.1/24

set interfaces ge-0/0/1 unit 200 vlan-id 200
set interfaces ge-0/0/1 unit 200 family inet address 192.168.200.1/24
</code></pre></li></ul><hr><h3 id=2-flexible-vlan-tagging>2. <code>flexible-vlan-tagging</code></h3><ul><li><strong>Configuration Level:</strong> Physical Interface (<code>set interfaces &lt;interface-name> flexible-vlan-tagging</code>)</li><li><strong>Purpose:</strong> Enables advanced VLAN tagging capabilities, allowing for more complex scenarios on a single physical interface.</li><li><strong>Capabilities:</strong><ul><li>Supports logical units with <em>single</em> VLAN IDs (<code>vlan-id</code>).</li><li>Supports logical units with <em>double</em> (stacked/QinQ) VLAN tags (<code>vlan-tags outer &lt;tag> inner &lt;tag></code>).</li><li>Supports logical units accepting <em>untagged</em> traffic (<code>vlan-id none</code>, though configuration details vary slightly by platform/scenario).</li><li>Allows mixing single-tagged, double-tagged, and untagged logical units on the <em>same</em> physical interface.</li><li>Supports VLAN ID lists and ranges on logical units (<code>vlan-id-list [ list-of-vlans ]</code>).</li><li>Often a prerequisite for advanced Layer 2 features and services.</li></ul></li><li><strong>Limitations:</strong><ul><li>Slightly more complex configuration as each logical unit&rsquo;s tagging requirement must be explicitly defined.</li></ul></li><li><strong>Typical Use Case:</strong><ul><li>QinQ deployments (Service Provider NNI, Enterprise Campus).</li><li>Interfaces needing to handle a mix of single-tagged customer traffic and double-tagged infrastructure traffic.</li><li>Interfaces where some services are tagged and others are untagged.</li><li>Aggregation points requiring flexible VLAN mapping.</li></ul></li><li><strong>Example:</strong><pre tabindex=0><code class=language-junos data-lang=junos># Configure the physical interface for advanced tagging
set interfaces xe-0/1/0 flexible-vlan-tagging

# Configure a logical unit for single-tagged traffic
set interfaces xe-0/1/0 unit 101 description &#34;Single Tagged Customer A&#34;
set interfaces xe-0/1/0 unit 101 vlan-id 101
set interfaces xe-0/1/0 unit 101 family bridge # Example for L2

# Configure a logical unit for double-tagged (QinQ) traffic
set interfaces xe-0/1/0 unit 500 description &#34;QinQ Customer B (Outer 500, Inner 50)&#34;
set interfaces xe-0/1/0 unit 500 vlan-tags outer 500 inner 50
set interfaces xe-0/1/0 unit 500 family bridge # Example for L2

# Configure a logical unit for untagged traffic (config might vary slightly)
# This often requires specific encapsulation like vlan-bridge or ethenet-bridge
set interfaces xe-0/1/0 unit 0 description &#34;Untagged Management&#34;
set interfaces xe-0/1/0 unit 0 encapsulation vlan-bridge
# Note: No &#39;vlan-id&#39; or &#39;vlan-tags&#39; means it might handle untagged frames if configured correctly
set interfaces xe-0/1/0 unit 0 family inet address 10.0.0.1/24

# Configure a logical unit accepting a list of VLANs
set interfaces xe-0/1/0 unit 999 description &#34;VLAN List Service&#34;
set interfaces xe-0/1/0 unit 999 vlan-id-list [ 200 205-210 300 ]
set interfaces xe-0/1/0 unit 999 encapsulation vlan-bridge
</code></pre></li></ul><hr><h3 id=3-encapsulation-flexible-ethernet-services>3. <code>encapsulation flexible-ethernet-services</code></h3><ul><li><strong>Configuration Level:</strong> Physical Interface (<code>set interfaces &lt;interface-name> encapsulation flexible-ethernet-services</code>)</li><li><strong>Purpose:</strong> Primarily used on MX Series routers (and some other platforms) to allow a <em>mix of different Layer 2 encapsulation types</em> (like bridge, ccc, vpls) on different logical units of the <em>same</em> physical interface. It fundamentally changes how the interface PFE (Packet Forwarding Engine) processes frames to support this service flexibility.</li><li><strong>Capabilities:</strong><ul><li>Allows logical units (<code>unit</code>) under the same physical interface to have different Ethernet service encapsulations (e.g., <code>encapsulation vlan-bridge</code>, <code>encapsulation vlan-ccc</code>, <code>encapsulation vlan-vpls</code>, <code>encapsulation ethernet-ccc</code>, etc.).</li><li>Enables maximum service multiplexing onto a single physical port.</li></ul></li><li><strong>Important Note:</strong> This option <em>must often be used in conjunction with <code>flexible-vlan-tagging</code></em> if the services running on the logical units need to handle tagged frames (single or double). <code>flexible-ethernet-services</code> defines the <em>service type</em> flexibility, while <code>flexible-vlan-tagging</code> defines the <em>VLAN tag</em> flexibility.</li><li><strong>Limitations:</strong><ul><li>Platform-specific (mainly MX Series).</li><li>Adds configuration complexity.</li><li>Cannot be combined with <code>vlan-tagging</code> on the same physical interface.</li></ul></li><li><strong>Typical Use Case:</strong><ul><li>Service Provider edge routers (PE) terminating multiple customers with different L2VPN service types (E-Line/CCC, E-LAN/VPLS, E-Tree) or bridging requirements on the same physical link (NNI or UNI).</li><li>Data Center interconnects requiring diverse L2 service types.</li></ul></li><li><strong>Example:</strong><pre tabindex=0><code class=language-junos data-lang=junos># Configure the physical interface for flexible service encapsulations AND flexible tagging
set interfaces xe-0/2/0 encapsulation flexible-ethernet-services
set interfaces xe-0/2/0 flexible-vlan-tagging

# Logical unit for a bridged service (single tag)
set interfaces xe-0/2/0 unit 1000 description &#34;Bridged Service VLAN 1000&#34;
set interfaces xe-0/2/0 unit 1000 encapsulation vlan-bridge
set interfaces xe-0/2/0 unit 1000 vlan-id 1000

# Logical unit for a VPLS service (QinQ tag)
set interfaces xe-0/2/0 unit 2000 description &#34;VPLS Service Outer 200 Inner 20&#34;
set interfaces xe-0/2/0 unit 2000 encapsulation vlan-vpls
set interfaces xe-0/2/0 unit 2000 vlan-tags outer 200 inner 20

# Logical unit for a CCC/L2Circuit service (single tag)
set interfaces xe-0/2/0 unit 3000 description &#34;CCC/E-Line Service VLAN 3000&#34;
set interfaces xe-0/2/0 unit 3000 encapsulation vlan-ccc
set interfaces xe-0/2/0 unit 3000 vlan-id 3000
</code></pre></li></ul><hr><h3 id=summary-table>Summary Table</h3><table><thead><tr><th style=text-align:left>Feature</th><th style=text-align:left><code>vlan-tagging</code></th><th style=text-align:left><code>flexible-vlan-tagging</code></th><th style=text-align:left><code>encapsulation flexible-ethernet-services</code> (+ <code>flexible-vlan-tagging</code>)</th></tr></thead><tbody><tr><td style=text-align:left><strong>Config Level</strong></td><td style=text-align:left>Physical Interface</td><td style=text-align:left>Physical Interface</td><td style=text-align:left>Physical Interface</td></tr><tr><td style=text-align:left><strong>Primary Purpose</strong></td><td style=text-align:left>Basic 802.1Q tagging</td><td style=text-align:left>Advanced VLAN tagging (QinQ, Mixed)</td><td style=text-align:left>Mix different L2 service types on units</td></tr><tr><td style=text-align:left><strong>Single Tag Support</strong></td><td style=text-align:left>Yes (via <code>vlan-id</code> on unit)</td><td style=text-align:left>Yes (via <code>vlan-id</code> on unit)</td><td style=text-align:left>Yes (if <code>flexible-vlan-tagging</code> also used)</td></tr><tr><td style=text-align:left><strong>Double Tag (QinQ) Support</strong></td><td style=text-align:left>No</td><td style=text-align:left>Yes (via <code>vlan-tags</code> on unit)</td><td style=text-align:left>Yes (if <code>flexible-vlan-tagging</code> also used)</td></tr><tr><td style=text-align:left><strong>Untagged Support</strong></td><td style=text-align:left>Yes (one <code>native-vlan-id</code>)</td><td style=text-align:left>Yes (per unit, requires specific config)</td><td style=text-align:left>Yes (per unit, requires specific config)</td></tr><tr><td style=text-align:left><strong>Mixed Tag/Untagged Units</strong></td><td style=text-align:left>No (except native)</td><td style=text-align:left>Yes</td><td style=text-align:left>Yes</td></tr><tr><td style=text-align:left><strong>VLAN Lists/Ranges</strong></td><td style=text-align:left>No</td><td style=text-align:left>Yes</td><td style=text-align:left>Yes</td></tr><tr><td style=text-align:left><strong>Mixed L2 Encapsulations per Port</strong></td><td style=text-align:left>No</td><td style=text-align:left>No</td><td style=text-align:left>Yes (e.g., bridge, ccc, vpls on same port)</td></tr><tr><td style=text-align:left><strong>Common Platforms</strong></td><td style=text-align:left>All Junos platforms</td><td style=text-align:left>Most modern Junos platforms</td><td style=text-align:left>Primarily MX Series (and some others like PTX, ACX)</td></tr><tr><td style=text-align:left><strong>Use When&mldr;</strong></td><td style=text-align:left>Simple trunk port, single tags only.</td><td style=text-align:left>Need QinQ, mix tagged/untagged, VLAN lists.</td><td style=text-align:left>Need to mix L2VPN service types (VPLS, CCC, Bridge) on one port (MX).</td></tr></tbody></table><hr><p><strong>In essence:</strong></p><ul><li>Use <code>vlan-tagging</code> for the simplest trunk port needs.</li><li>Use <code>flexible-vlan-tagging</code> when you need any advanced VLAN tagging like QinQ or mixing tagged/untagged traffic on different units of the same port.</li><li>Use <code>encapsulation flexible-ethernet-services</code> (usually <em>with</em> <code>flexible-vlan-tagging</code>) on platforms like MX when you need to run different <em>types</em> of Layer 2 services (bridging, VPLS, CCC, etc.) concurrently on logical units sharing the same physical interface.</li></ul></div><div class="flex justify-between"><div></div><div></div></div></div></section></div></article></main></div><footer><footer class="mx-auto w-full max-w-container text-center"><div class="max-w-screen-xl sm:pt-5 md:pt-8 pt-0"><div class="border-b border-[#4c566a] mb-5 flex justify-between"></div></div><div class="flex flex-col items-center"><div id=logo><span class=text-[#5e81ac]>ngeran[</span><span class=text-[#ebcb8b]>io</span><span class=text-[#5e81ac]>]</span></div><p class="mt-5 text-center text-sm leading-6 text-slate-500">Â© Copyright 2026. All rights reserved.</p><div class="mt-4 flex items-center justify-center space-x-4 text-sm font-semibold leading-6 text-slate-700"><a href=/privacy-policy>Privacy policy</a><div class="h-4 w-px bg-slate-500/20"></div><a href=/changelog>Changelog</a></div></div></footer></footer><script>const mobileMenuButton=document.getElementById("mobile-menu-button"),mobileMenu=document.getElementById("mobile-menu");mobileMenuButton?.addEventListener("click",()=>{mobileMenu.classList.toggle("hidden")}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".relative.group");e.forEach(e=>{const t=e.querySelector(".megamenu-dropdown");t&&(e.addEventListener("mouseenter",function(){t.style.opacity="1",t.style.visibility="visible",t.style.transform="translateY(0)"}),e.addEventListener("mouseleave",function(){t.style.opacity="0",t.style.visibility="hidden",t.style.transform="translateY(0.5rem)"}))})})</script></body></html>